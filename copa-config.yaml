apiVersion: copa.sh/v1alpha1
kind: PatchConfig

# Strategy: Explicitly list the last 3 stable versions of each image
# This limits the scope and prevents patching hundreds of old versions
target:
  registry: "ghcr.io/verity-org"

images:
  # Start with just a few critical images - expand as needed
  - name: "grafana"
    image: "docker.io/grafana/grafana"
    tags: {strategy: "list", list: ["12.3.3", "12.3.2", "12.3.1"]}

  - name: "nginx"
    image: "docker.io/library/nginx"
    tags: {strategy: "list", list: ["1.29.5", "1.29.4", "1.29.3"]}

  - name: "prometheus"
    image: "quay.io/prometheus/prometheus"
    tags: {strategy: "list", list: ["v3.9.1", "v3.9.0", "v3.8.1"]}
